(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{172:function(e,t,s){"use strict";s.r(t);var a=s(4),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"将vuepress建立的博客部署到github或gitee上"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#将vuepress建立的博客部署到github或gitee上"}},[e._v("#")]),e._v(" 将"),s("code",[e._v("VuePress")]),e._v("建立的博客部署到GitHub或Gitee上")]),e._v(" "),s("p",[e._v("在上一篇中，我们详细介绍了如何利用"),s("code",[e._v("VuePress")]),e._v("搭建起个人博客系统，但这只是在本地debug启动的，接下来，我们把它部署到"),s("code",[e._v("Github")]),e._v("网站。")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("在"),s("code",[e._v("config.js")]),e._v("中配置"),s("code",[e._v("base")])]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[e._v("  base"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'/v-blog/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n")])])]),s("p",[s("code",[e._v("v-blog")]),e._v("是我Github上的仓库名")])]),e._v(" "),s("li",[s("p",[e._v("编写自动化脚本")]),e._v(" "),s("p",[e._v("在根目录"),s("code",[e._v("/v-blog/")]),e._v("下我们需要编写两个脚本")]),e._v(" "),s("p",[e._v("因为写在一个脚本里话编译完会直接退出，"),s("br"),e._v("\n所以把编译的命令单独放在另外一个脚本文件里调就可以了")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("build.bat")]),e._v(" "),s("div",{staticClass:"language-bat extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("@echo off\nvuepress build docs\n")])])])]),e._v(" "),s("li",[s("p",[e._v("deploy.bat")]),e._v(" "),s("div",{staticClass:"language-bat extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('@echo off\n\necho building...\ncall build.bat\necho building-complete.\n\ncd docs/.vuepress/dist\ngit init\ngit add -A\ngit commit -m \'auto-deploy\'\ngit remote add origin https://github.com/CoderMonkie/v-blog.git\ngit pull\ngit push --force origin HEAD:gh-pages\n\nREM To delete the dist folder\ncd ..\necho delete-directory: "%cd%/dist"\nrmdir /s /q "%cd%/dist"\ncd..\ncd..\necho Auto-Deploy-Complete!\npause\n')])])])])]),e._v(" "),s("p",[e._v("然后，只要双击执行"),s("code",[e._v("depploy.bat")]),e._v("就可以。"),s("br"),e._v("\n或者配置到"),s("code",[e._v("package.json")]),e._v("的"),s("code",[e._v("scripts")]),e._v("中。")]),e._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"scripts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"deploy"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"deploy.bat"')]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("div",{staticClass:"language-bat extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("npm run deploy\n")])])]),s("p",[e._v("编译完成提及到远程的时候，会提示输入用户名密码。"),s("br"),e._v("\n(或者保存登录权限信息使其静默推送)")])]),e._v(" "),s("li",[s("p",[e._v("GitHub中本项目的"),s("code",[e._v("setting")]),e._v("下确认")]),e._v(" "),s("p",[e._v("我们在push时设为推送到"),s("code",[e._v("gh-pages")]),e._v("分支，"),s("br"),e._v("\n此时，"),s("code",[e._v("v-blog")]),e._v(" -- "),s("code",[e._v("setting")]),e._v("下的"),s("code",[e._v("GitHub Pages")]),e._v("设置，"),s("br"),e._v("\n应该为"),s("code",[e._v("gh-pages")]),e._v("选中状态，不是的话改为"),s("code",[e._v("gh-pages")])]),e._v(" "),s("p",[e._v("这样就完成了。如果"),s("code",[e._v("GitHub Pages")]),e._v("设置页显示：")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Your site is published at https://codermonkie.github.io/v-blog/\n")])])]),s("p",[e._v("那么说明网站发布了，可以查看。")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Your site is ready to be published at https://codermonkie.github.io/v-blog/.\n")])])]),s("p",[e._v("那么说明"),s("code",[e._v("GitHub")]),e._v("还没有完成给你发布，访问的话会是404，"),s("em",[e._v("等待吧。")])])])]),e._v(" "),s("hr"),e._v(" "),s("p",[e._v("(深夜)更新：已经好了"),s("a",{attrs:{href:"https://codermonkie.github.io/v-blog/",target:"_blank",rel:"noopener noreferrer"}},[e._v("v-blog"),s("OutboundLink")],1),s("br"),e._v("\n在"),s("code",[e._v("GitHub Pages")]),e._v("/"),s("code",[e._v("source")]),e._v("的下拉框里切换了几次，不经意间发现已经发布了。")]),e._v(" "),s("hr"),e._v(" "),s("h3",{attrs:{id:"补充："}},[s("a",{staticClass:"header-anchor",attrs:{href:"#补充："}},[e._v("#")]),e._v(" 补充：")]),e._v(" "),s("p",[e._v("补两张图，看起来能更简明，直截了当。")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("GitHub")]),e._v(" "),s("p",[e._v("在【Setting -- GitHub Pages】的Source的下拉框中选择要使用的分支"),s("br"),e._v("\n（也可以branch/docs文件夹，不过我们VuePress生成的博客嘛直接用分支了）\n"),s("img",{attrs:{src:"https://s2.ax1x.com/2019/11/17/MrO6RH.png",alt:"GitHub Pages"}})])]),e._v(" "),s("li",[s("p",[e._v("Gitee")]),e._v(" "),s("p",[e._v("在【服务 -- Gitee Pages】点【启动】\n"),s("img",{attrs:{src:"https://s2.ax1x.com/2019/11/17/MrOsiD.png",alt:"Gitee Pages"}})]),e._v(" "),s("p",[e._v("更新网站的话静态文件推送后要点【更新】\n"),s("img",{attrs:{src:"https://s2.ax1x.com/2019/11/17/MrOczd.png",alt:"Gitee Pages"}})])])]),e._v(" "),s("hr"),e._v(" "),s("h3",{attrs:{id:"如果是要将博客部署到gitee："}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如果是要将博客部署到gitee："}},[e._v("#")]),e._v(" 如果是要将博客部署到Gitee：")]),e._v(" "),s("p",[e._v("除了我们可以同时提交到两个远程（GitHub和Gitee仓库），"),s("br"),e._v(" "),s("a",{attrs:{href:"https://gitee.com/coder-monkey/JS-Corner/tree/master/JS-Corner-07",target:"_blank",rel:"noopener noreferrer"}},[e._v("关联多个远程仓库，实现一次push多站提交"),s("OutboundLink")],1),s("br"),e._v("\n也可以在同一个工程文件里实现两个远程仓库的部署。")]),e._v(" "),s("p",[e._v("将上面给出的脚本"),s("code",[e._v("deploy.bat")]),e._v("，另存一份"),s("code",[e._v("deploy-gitee.bat")]),e._v(","),s("br"),e._v("\n修改一下，主要有两处：")]),e._v(" "),s("ul",[s("li",[e._v("远程地址（github -> gitee 的地址）")]),e._v(" "),s("li",[e._v("提交到的远程分支名（gh-pages -> v-blog-pages）")])]),e._v(" "),s("div",{staticClass:"language-bat extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('@echo off\n\necho building...\ncall build.bat\necho building-complete.\n\ncd docs/.vuepress/dist\ngit init\ngit remote add origin https://gitee.com/coder-monkey/v-blog.git\ngit add -A\ngit commit -m \'auto-deploy\'\ngit pull\ngit push --force origin HEAD:v-blog-pages\n\nREM To delete the dist folder\ncd ..\necho delete-directory: "%cd%/dist"\nrmdir /s /q "%cd%/dist"\ncd..\ncd..\necho Auto-Deploy-Complete!\npause\n')])])]),s("p",[s("code",[e._v("package.json")]),e._v("里加"),s("code",[e._v("scripts")]),e._v("一个命令")]),e._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"scripts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"deploy-gitee"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"deploy-gitee.bat"')]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("p",[e._v("双击执行"),s("code",[e._v("deploy-gitee.bat")]),e._v("或以下：")]),e._v(" "),s("div",{staticClass:"language-bat extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("npm run deploy-gitee\n")])])]),s("p",[e._v("再稍微动动手脚本稍作修改就可以实现一次命令多个远程部署了~")]),e._v(" "),s("hr"),e._v(" "),s("blockquote",[s("p",[s("code",[e._v("auto-deploy.bat")]),e._v("最终版：")])]),e._v(" "),s("div",{staticClass:"language-bat extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('@echo off\n\necho building...\ncall build.bat\necho building-complete.\n\ncd docs/.vuepress/dist\n\ngit init\ngit config user.name maonianyou\ngit config user.email maonianyou@foxmail.com\ngit add -A\ngit commit -m "%date% %time% auto-deploy"\nREM 静默推送的话可在地址里填入username和password,如\nREM git remote add origin https://username:password@gitee.com/username/repo.git\ngit remote add origin https://gitee.com/coder-monkey/v-blog.git\ngit pull\ngit push --force origin HEAD:v-blog-pages\necho "Gitee Pages Deploy Complete!"\n\nREM 部署完上面的 Gitee Pages\nREM 需要删除 .git 文件夹\nREM 以备部署 GitHub Pages 再次初始化时用\nrmdir /s /q "%cd%/.git"\n\ngit init\ngit config user.name maonianyou\ngit config user.email maonianyou@gmail.com\ngit add -A\ngit commit -m "%date% %time% auto-deploy"\nREM 静默推送的话可在地址里填入username和password,如\nREM git remote add origin https://username:password@github.com/username/repo.git\ngit remote add origin https://github.com/CoderMonkie/v-blog.git\ngit pull\ngit push --force origin HEAD:gh-pages\necho "GitHub Pages Deploy Complete!"\n\nREM To delete the dist folder\ncd ..\necho delete-directory: "%cd%/dist"\nrmdir /s /q "%cd%/dist"\ncd..\ncd..\necho Auto-Deploy-Complete!\npause\n')])])]),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[e._v('  "scripts'),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"deploy"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"auto-deploy.bat"')]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("div",{staticClass:"language-cmd extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("npm run deploy\n")])])]),s("hr"),e._v(" "),s("blockquote",[s("p",[e._v("继续改进")])]),e._v(" "),s("ul",[s("li",[s("p",[s("code",[e._v("package.json")]),e._v("/"),s("code",[e._v("scripts")]),e._v("\n加一条，执行"),s("code",[e._v("git push")]),e._v("和"),s("code",[e._v("auto-deploy.bat")]),s("br"),e._v("\n这样推送加部署就一口气完成啦")])]),e._v(" "),s("li",[s("p",[e._v("使用"),s("code",[e._v("netlify")]),e._v("或者"),s("code",[e._v("travis-ci")]),e._v("这样的工具"),s("br"),e._v(" "),s("code",[e._v("GitHub")]),e._v("的"),s("code",[e._v("WebHook")]),e._v("也要了解一下")])])]),e._v(" "),s("p",[e._v("更多好玩的，赶快来探索吧~")])])}),[],!1,null,null,null);t.default=n.exports}}]);