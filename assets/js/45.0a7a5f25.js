(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{176:function(s,t,a){"use strict";a.r(t);var e=a(4),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"win10下安装linux子系统ubuntu"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#win10下安装linux子系统ubuntu"}},[s._v("#")]),s._v(" Win10下安装Linux子系统Ubuntu")]),s._v(" "),a("blockquote",[a("p",[s._v("WSL: Windows Subsystem for Linux")])]),s._v(" "),a("p",[s._v("----在Win10上轻松拥有Linux环境")]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"准备工作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#准备工作"}},[s._v("#")]),s._v(" 准备工作")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("控制面板 》 程序和功能 》 启用或关闭 Windows 功能")]),s._v(" "),a("p",[s._v("勾选【适用于 Linux 的Windows 子系统】")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.ax1x.com/2019/11/17/MrsgJg.jpg",alt:"win10-subsys-ubuntu-0-prepare-01.jpg"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.ax1x.com/2019/11/17/Mrshyn.jpg",alt:"win10-subsys-ubuntu-0-prepare-02.jpg"}})])]),s._v(" "),a("li",[a("p",[s._v("设置 》 更新和安全 》 开发者选项")]),s._v(" "),a("p",[s._v("选择【开发人员模式】")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.ax1x.com/2019/11/17/MrsRzj.jpg",alt:"win10-subsys-ubuntu-0-prepare-03.jpg"}})])])]),s._v(" "),a("blockquote",[a("p",[s._v("做完准备工作，需要重启电脑，"),a("br"),s._v("\n不然安装完 Ubuntu 后启动时还是会提示")])]),s._v(" "),a("h2",{attrs:{id:"下载安装-ubuntu"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载安装-ubuntu"}},[s._v("#")]),s._v(" 下载安装 Ubuntu")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("打开 Microsoft Store 应用商店")]),s._v(" "),a("p",[s._v("点【开始】输入 Microsoft Store 即可找到，打开搜索 Linux。")])]),s._v(" "),a("li",[a("p",[s._v("第一个就是 Ubuntu，点【免费下载】")]),s._v(" "),a("p",[s._v("下载+安装，完毕后会出现启动按钮，也可以在开始菜单找到并打开。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.ax1x.com/2019/11/17/MrsfQs.jpg",alt:"win10-subsys-ubuntu-1-download-01.jpg"}})])]),s._v(" "),a("li",[a("p",[s._v("启动 Ubuntu")]),s._v(" "),a("p",[s._v("如果在准备工作后没有重启，此时会找不到子系统，还是需要重启一下的。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.ax1x.com/2019/11/17/MrT4de.jpg",alt:"win10-subsys-ubuntu-1-start-01.jpg"}})])]),s._v(" "),a("li",[a("p",[s._v("安装中...")]),s._v(" "),a("p",[s._v("正常情况的话就会是以下这样：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.ax1x.com/2019/11/17/MrscFS.jpg",alt:"win10-subsys-ubuntu-1-install-01.jpg"}})])]),s._v(" "),a("li",[a("p",[s._v("设置用户名密码以添加用户")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.ax1x.com/2019/11/17/Mrs4Lq.jpg",alt:"win10-subsys-ubuntu-1-install-02.jpg"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.ax1x.com/2019/11/17/MrToid.jpg",alt:"win10-subsys-ubuntu-1-install-03.jpg"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.ax1x.com/2019/11/17/MrT5IH.jpg",alt:"win10-subsys-ubuntu-1-install-04.jpg"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.ax1x.com/2019/11/17/MrTTJA.jpg",alt:"win10-subsys-ubuntu-1-install-05.jpg"}})])])]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("通过命令行，就可以便捷地完成很多工作了，"),a("br"),s._v("\n准备另外开一篇记录 bash 总结。")]),s._v(" "),a("p",[s._v("现在，我们还有两点需求：")]),s._v(" "),a("ul",[a("li",[s._v("网络原因，跟之前介绍的 npm 一样，需要将源换为国内镜像")]),s._v(" "),a("li",[s._v("操作习惯，安装一个图形界面，便于浏览网页查看图片等")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"切换源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#切换源"}},[s._v("#")]),s._v(" 切换源")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("先备份下原源文件")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" /etc/apt/sources.list /etc/apt/sources.list.bak"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# or")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /etc/apt/sources.list /etc/apt/sources.list.bak1\n")])])])]),s._v(" "),a("li",[a("p",[s._v("复制")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Ubuntu 清华镜像："),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse\n\n# 预发布软件源，不建议启用\n# deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse\n")])])])]),s._v(" "),a("li",[a("p",[s._v("粘贴")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" edit-sources\n")])])]),a("p",[s._v("选择 Vim 打开文件，或者直接：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/apt/sources.list\n")])])]),a("p",[s._v("然后输入"),a("code",[s._v(":1,d")]),s._v("清空所有行，复制上面的镜像内容，在这里点鼠标右键就粘贴上了。")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v(":wq\n")])])]),a("p",[s._v("保存并退出，编辑完成后会提示：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("Your "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/etc/apt/sources.list'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" changed, please run "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'apt-get update'")]),s._v(".maony@Hasee-201301:/etc/apt$\n")])])]),a("p",[s._v("输入：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" update    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 替代了 sudo apt-get update")]),s._v("\n")])])]),a("p",[a("img",{attrs:{src:"https://s2.ax1x.com/2019/11/17/MrThZD.jpg",alt:"win10-subsys-ubuntu-2-repository-01.jpg"}})]),s._v(" "),a("p",[s._v("更新结束：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.ax1x.com/2019/11/17/MrTOL8.jpg",alt:"win10-subsys-ubuntu-2-repository-02.jpg"}})])])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"安装图形界面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装图形界面"}},[s._v("#")]),s._v(" 安装图形界面")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("lxde")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" lxde\n")])])]),a("div",{staticClass:"language-bsh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo apt install vnc4server\n")])])]),a("p",[s._v("基本每次安装东西会询问是否安装，输入"),a("code",[s._v("Y")]),s._v("，然后耐心等待安装完成即可。")]),s._v(" "),a("p",[s._v("可以一次安装多个，上面两个主要的单独列出来了而已。")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" gnome-panel gnome-settings-daemon metacity nautilus gnome-terminal\n")])])]),a("p",[s._v("配置 vncserver 的 xstartup 文件：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /home/username/.vnc/xstartup\n")])])]),a("p",[s._v("替换为以下内容：")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#!/bin/sh\nexport XKL_XMODMAP_DISABLE=1  \nunset SESSION_MANAGER  \nunset DBUS_SESSION_BUS_ADDRESS  \ngnome-panel &  \ngnome-settings-daemon &  \nmetacity &  \nnautilus &  \ngnome-terminal &\nstart lxde &\n")])])]),a("p",[s._v("参考了很多资料都没有启动起来桌面，最终加了上面的最后一句"),a("code",[s._v("start lxde &")]),s._v("才可以的。")])]),s._v(" "),a("li",[a("p",[s._v("win10上使用 "),a("a",{attrs:{href:"https://bintray.com/tigervnc/stable/download_file?file_path=vncviewer64-1.9.0.exe",target:"_blank",rel:"noopener noreferrer"}},[s._v("vncviewer"),a("OutboundLink")],1),s._v(" 来连接 ubuntu")]),s._v(" "),a("p",[s._v("点连接(https://bintray.com/tigervnc/stable/download_file?file_path=vncviewer64-1.9.0.exe)或另行搜索下载 vncview。")])]),s._v(" "),a("li",[a("p",[s._v("使用方法")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("在WindowsSubSystemLinux（WSL）的Ubuntu上启动 vncserver，")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("vncserver  # 等同于 vncserver :0，以这个数字ID区分可以开多个桌面\n")])])]),a("p",[a("img",{attrs:{src:"https://s2.ax1x.com/2019/11/17/MrTqQP.jpg",alt:"win10-subsys-ubuntu-3-remote-01.jpg"}})])]),s._v(" "),a("li",[a("p",[s._v("在Win10上，启动VNC Viewer")]),s._v(" "),a("p",[s._v("输入ubuntu系统地址，如果"),a("code",[s._v("vncserver :1")]),s._v("，这里就是"),a("code",[s._v("127.0.0.1:1")]),s._v("，默认为0可以省略。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.ax1x.com/2019/11/17/MrTLsf.jpg",alt:"win10-subsys-ubuntu-3-remote-02.jpg"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.ax1x.com/2019/11/17/MrTjeS.jpg",alt:"win10-subsys-ubuntu-3-remote-03.jpg"}})])])])])]),s._v(" "),a("blockquote",[a("p",[s._v("以下为没有正常显示出图形界面的情况：")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.ax1x.com/2019/11/17/MrTvdg.jpg",alt:"win10-subsys-ubuntu-3-remote-04.jpg"}})]),s._v(" "),a("blockquote",[a("p",[s._v("正常显示的情况：")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.ax1x.com/2019/11/17/MrTxoQ.jpg",alt:"win10-subsys-ubuntu-simple-UI-lxde.jpg"}})]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("这个极简的界面显得low一些（虽然这不是重点），等改天还是再整个漂亮点的UI吧。")]),s._v(" "),a("hr"),s._v(" "),a("blockquote",[a("p",[s._v("补充")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("尝试另一个桌面：xfce4")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" xubuntu-desktop xfce4\n")])])]),a("p",[s._v("编辑"),a("code",[s._v("/home/username/.vnc/xstartup")]),s._v("，将最后一行的命令替换为（注意没有空格）")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("startxfce4 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])])]),a("p",[a("img",{attrs:{src:"https://s2.ax1x.com/2019/11/17/Mr7Sij.png",alt:"win10-subsys-ubuntu-3-xfce-01.png"}})])])])])}),[],!1,null,null,null);t.default=n.exports}}]);